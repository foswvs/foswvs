<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
<title>admin portal</title>
<link href="/css/pico.min.css" rel="stylesheet">
</head>
<body>
<main class="container">
  <button onclick="location.assign('txn.html');">transactions</button>
  <button onclick="location.assign('list_devices.html');">list devices</button>
  <button onclick="location.assign('active_devices.html');">active devices</button>
  <button onclick="location.assign('chpwd.html');">update password</button>
  <button onclick="location.assign('rates.html');">update rates</button>
  <button onclick="location.assign('plugins.html');">plugins</button>
  <button onclick="logout();">logout</button>
</main>
<script src="/js/theme.js"></script>
<script>
function check() {
  const x = new XMLHttpRequest();

  x.addEventListener('readystatechange',()=> {
    if( x.readyState === 4 ) {
      if( x.status === 200 ) {
        return;
      }

      if( x.status === 401 ) {
        window.location.assign('login.html');
      }
    }
  });

  x.open('GET','pass.php');
  x.send();
}

function logout() {
  const x = new XMLHttpRequest();

  x.addEventListener('readystatechange',()=> {
    if( x.readyState === 4 ) {
      if( x.status === 200 ) {
        window.location.assign('login.html');
      }
    }
  });

  x.open('DELETE','pass.php');
  x.send();
}
document.addEventListener('DOMContentLoaded', check);
</script>
</body>
</html>
